var MapModule=require("ti.map"),win=Ti.UI.currentWindow,opera=MapModule.createAnnotation({latitude:-33.8569,longitude:151.2153,image:"dog2.png",title:"Sydney Opera House",subtitle:"Sydney, New South Wales, Australia"}),mapview=MapModule.createView({userLocation:!0,mapType:MapModule.NORMAL_TYPE,region:{latitude:-33.87365,longitude:151.20689,latitudeDelta:.1,longitudeDelta:.1},annotations:[opera]}),takePhotoButton=Ti.UI.createButton({title:"takePhotoButton",height:50,width:300,bottom:0}),globalLongitude,globalLatitude;takePhotoButton.addEventListener("click",function(){Titanium.Geolocation.getCurrentPosition(function(t){return!t.success||t.error?void alert("Could not find the device location"):(globalLongitude=t.coords.longitude,globalLatitude=t.coords.latitude,void alert("latitude: "+globalLatitude+"longitude: "+globalLongitude))});var t=Titanium.UI.createWindow({backgroundColor:"#123",title:"Shake the fuck off",barColor:"black",url:"shake.js",longitude:globalLongitude,latitude:globalLatitude});t.open()}),win.add(mapview),win.add(takePhotoButton),win.open();