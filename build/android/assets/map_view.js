for(var MapModule=require("ti.map"),win=Ti.UI.currentWindow,annot=[],i=0;i<win.jData.co.length;i++)annot[i]=MapModule.createAnnotation({latitude:win.jData.co[i].latitude,longitude:win.jData.co[i].longitude,image:win.jData.co[i].imgpath,title:win.jData.co[i].title});var globalLongitude,globalLatitude;Titanium.Geolocation.getCurrentPosition(function(t){return!t.success||t.error?void alert("Could not find the device location"):(globalLongitude=t.coords.longitude,void(globalLatitude=t.coords.latitude))});var mapview=MapModule.createView({userLocation:!0,mapType:MapModule.NORMAL_TYPE,region:{latitude:globalLatitude,longitude:globalLongitude,latitudeDelta:.1,longitudeDelta:.1},annotations:annot}),takePhotoButton=Ti.UI.createButton({title:"Do the Landmark",height:50,width:250,bottom:10,borderRadius:1,font:{fontSize:22,fontWeight:"bold",fontFamily:"Segoe UI Semibold"},color:"#ecf0f1",backgroundColor:"#e74c3c"});takePhotoButton.addEventListener("click",function(){var t=Titanium.UI.createWindow({backgroundColor:"rgb(36,38,37)",title:"Shake it off",barColor:"black",url:"shake.js",longitude:globalLongitude,latitude:globalLatitude,xparent:win});t.open()}),win.addEventListener("reload",function(t){temp=MapModule.createAnnotation({latitude:t.data.latitude,longitude:t.data.longitude,image:t.data.imgpath,title:t.data.title}),win.jData.co.push({latitude:t.data.latitude.toString(),longitude:t.data.longitude.toString(),imgpath:t.data.imgpath.toString(),title:t.data.title.toString()}),alert(win.jData);for(var a=0;a<win.jData.co.length;a++)annot[a]=MapModule.createAnnotation({latitude:win.jData.co[a].latitude,longitude:win.jData.co[a].longitude,image:win.jData.co[a].imgpath,title:win.jData.co[a].title});mapview.addAnnotations(annot);var e="r.json",i=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,e),o=JSON.stringify(win.jData);i.write(o)}),win.add(mapview),win.add(takePhotoButton),win.open();